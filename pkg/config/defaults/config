# ralphex configuration
# copy this file to ~/.config/ralphex/config and modify as needed
#
# config values in this file can be overridden by CLI flags.
# precedence (highest to lowest): CLI flags > local config (.ralphex/) > global config (~/.config/ralphex/) > embedded defaults
#
# NOTE: inline comments (e.g., "key = value # comment") are NOT supported.
# use full-line comments starting with # on a separate line instead.
# this is required to support hex color values like #00ff00.

# ------------------------------------------------------------------------------
# claude executor
# ------------------------------------------------------------------------------

# claude_command: the command to run claude code
# default: "claude"
claude_command = claude

# claude_args: arguments passed to claude command
# --dangerously-skip-permissions: bypass permission prompts for autonomous execution
# --output-format stream-json: output JSON events for progress tracking
# --verbose: enable detailed logging
claude_args = --dangerously-skip-permissions --output-format stream-json --verbose

# ------------------------------------------------------------------------------
# codex executor
# ------------------------------------------------------------------------------

# codex_enabled: whether to run codex external review phase
# set to false to skip codex review entirely
# default: true
codex_enabled = true

# codex_command: the command to run openai codex
# default: "codex"
codex_command = codex

# codex_model: model ID for codex
# available models: gpt-5.3-codex, gpt-5.3-codex-mini, gpt-5.2-codex
# default: gpt-5.3-codex
codex_model = gpt-5.3-codex

# codex_reasoning_effort: reasoning effort level for codex
# available: low, medium, high, xhigh
# default: xhigh
codex_reasoning_effort = xhigh

# codex_timeout_ms: timeout for codex execution in milliseconds
# default: 3600000 (1 hour)
codex_timeout_ms = 3600000

# codex_sandbox: sandbox mode for codex execution
# available: read-only, workspace-write, danger-full-access
# read-only: codex can read files but not write (safest for code review)
# note: in docker, sandbox is auto-disabled (landlock doesn't work in containers)
# default: read-only
codex_sandbox = read-only

# ------------------------------------------------------------------------------
# qwen executor
# ------------------------------------------------------------------------------

# qwen_enabled: whether to use Qwen Code instead of Claude Code
# set to true to enable Qwen for all execution phases
# default: false
# qwen_enabled = false

# qwen_command: the command to run Qwen Code
# default: "qwen"
# qwen_command = qwen

# qwen_args: arguments passed to Qwen command
# --yolo: skip permissions (equivalent to Claude's --dangerously-skip-permissions)
# --output-format stream-json: output JSON events for progress tracking
# default: --yolo --output-format stream-json
# qwen_args = --yolo --output-format stream-json

# qwen_error_patterns: patterns to detect in Qwen output (comma-separated)
# used to identify rate limits, quota issues, etc.
# default: (empty)
# qwen_error_patterns =

# ------------------------------------------------------------------------------
# external review
# ------------------------------------------------------------------------------

# external_review_tool: which tool to use for external code review
# available: codex, custom, none
# codex: use OpenAI Codex for external review (default)
# custom: use a custom script specified by custom_review_script
# none: skip external review entirely
# note: codex_enabled = false is treated as external_review_tool = none for backward compat
# default: codex
external_review_tool = codex

# custom_review_script: path to custom review script
# only used when external_review_tool = custom
# script receives prompt file path as single argument
# script should output findings to stdout and use <<<RALPHEX:CODEX_REVIEW_DONE>>> signal
# example: custom_review_script = ~/.config/ralphex/scripts/my-review.sh
# custom_review_script =

# ------------------------------------------------------------------------------
# finalize step
# ------------------------------------------------------------------------------

# finalize_enabled: whether to run finalize step after successful review phases
# runs once at the end, best-effort (failures logged but don't block success)
# default: false
# finalize_enabled = false

# ------------------------------------------------------------------------------
# timing
# ------------------------------------------------------------------------------

# iteration_delay_ms: delay between iterations in milliseconds
# allows for file system sync and prevents rate limiting
# default: 2000
iteration_delay_ms = 2000

# task_retry_count: number of retries if a task fails
# 0 = no retries, 1 = one retry (total 2 attempts)
# default: 1
task_retry_count = 1

# ------------------------------------------------------------------------------
# paths
# ------------------------------------------------------------------------------

# plans_dir: directory where plan files are located
# relative paths are resolved from the project root
# default: docs/plans
plans_dir = docs/plans

# watch_dirs: directories to watch for progress files in dashboard mode
# comma-separated list of paths, relative paths resolved from project root
# if not specified, defaults to current working directory
# example: watch_dirs = /home/user/projects, /var/log/ralphex
# watch_dirs =

# ------------------------------------------------------------------------------
# error pattern detection
# ------------------------------------------------------------------------------

# claude_error_patterns: patterns to detect in claude output indicating errors
# comma-separated list of substrings (case-insensitive matching)
# when detected, ralphex exits gracefully with an informative message
# default: You've hit your limit,API Error:
claude_error_patterns = You've hit your limit,API Error:

# codex_error_patterns: patterns to detect in codex output indicating errors
# comma-separated list of substrings (case-insensitive matching)
# when detected, ralphex exits gracefully with an informative message
# default: Rate limit,quota exceeded
codex_error_patterns = Rate limit,quota exceeded

# ------------------------------------------------------------------------------
# notifications (optional, disabled by default)
# ------------------------------------------------------------------------------

# notify_channels: comma-separated list of channels to use
# available: telegram, email, slack, webhook, custom
# leave empty or omit to disable notifications entirely
# example: notify_channels = telegram, webhook
# notify_channels =

# notify_on_error: send notification when execution fails
# default: true
# notify_on_error = true

# notify_on_complete: send notification when execution succeeds
# default: true
# notify_on_complete = true

# notify_timeout_ms: total timeout for all notification channels in milliseconds
# default: 10000
# notify_timeout_ms = 10000

# --- telegram ---

# notify_telegram_token: bot token from BotFather
# notify_telegram_token =

# notify_telegram_chat: chat ID or channel name (e.g., @mychannel or 123456789)
# notify_telegram_chat =

# --- slack ---

# notify_slack_token: slack bot oauth token (xoxb-...)
# notify_slack_token =

# notify_slack_channel: channel name or ID to post to
# notify_slack_channel =

# --- email (SMTP) ---

# notify_smtp_host: SMTP server hostname
# notify_smtp_host =

# notify_smtp_port: SMTP server port
# default: 587
# notify_smtp_port = 587

# notify_smtp_username: SMTP authentication username
# notify_smtp_username =

# notify_smtp_password: SMTP authentication password
# notify_smtp_password =

# notify_smtp_starttls: use STARTTLS for SMTP connection
# default: false
# notify_smtp_starttls = false

# notify_email_from: sender email address
# notify_email_from =

# notify_email_to: comma-separated list of recipient email addresses
# notify_email_to =

# --- webhook ---

# notify_webhook_urls: comma-separated list of webhook endpoint URLs
# the notification message is POSTed as plain text to each URL
# notify_webhook_urls =

# --- custom script ---

# notify_custom_script: path to custom notification script
# script receives Result JSON on stdin, exit 0 = success, non-zero = failure
# timeout controlled by notify_timeout_ms
# example: notify_custom_script = ~/.config/ralphex/scripts/notify.sh
# notify_custom_script =

# ------------------------------------------------------------------------------
# output colors (hex format: #RRGGBB)
# ------------------------------------------------------------------------------

# color_task: task execution phase (green)
color_task = #00ff00

# color_review: review phase (cyan)
color_review = #00ffff

# color_codex: codex external review (magenta)
color_codex = #d096d9

# color_claude_eval: claude evaluation of codex output (light blue)
color_claude_eval = #bdd6ff

# color_warn: warning messages (yellow)
color_warn = #ffc56d

# color_error: error messages (red)
color_error = #ff0000

# color_signal: completion/failure signals (light red)
color_signal = #d25252

# color_timestamp: timestamp prefix (gray)
color_timestamp = #8a8a8a

# color_info: informational messages (light gray)
color_info = #b4b4b4
